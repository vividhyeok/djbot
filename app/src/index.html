<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AutoMix DJ Bot</title>
  <!-- Î≥ÄÍ≤ΩÎê®: Pretendard, DM Sans, Syne Ìè∞Ìä∏ ÏÖãÏóÖ -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/variable/pretendardvariable.css" />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500&family=Syne:wght@400;700&display=swap"
    rel="stylesheet" />
  <!-- Ï†úÍ±∞Îê®: Inter Ìè∞Ìä∏ ÎßÅÌÅ¨ Ï†úÍ±∞ -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- Header -->
  <header class="app-header">
    <div class="logo">
      <!-- Î≥ÄÍ≤ΩÎê®: Ìó§ÎìúÌè∞ Ïù¥Î™®ÏßÄ ÎåÄÏã† Î°úÍ≥† SVG (ÍµêÏ∞®ÌïòÎäî Îëê Í∞úÏùò Ìò∏) -->
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="logo-mark">
        <circle cx="12" cy="12" r="10"></circle>
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M20 12h-2"></path>
      </svg>
      <div>
        <h1>AutoMix DJ Bot</h1>
        <!-- Ï†úÍ±∞Îê®: Î∂ÄÏ†úÎ™© (AI-Powered...) Ï†úÍ±∞ -->
      </div>
    </div>
    <div class="status-badge" id="statusBadge">
      <!-- Î≥ÄÍ≤ΩÎê®: Ï¥àÎ°ùÏÉâ/ÎÖ∏ÎûÄÏÉâ ÎåÄÏã† ÏÉâÏÉÅ ÏãúÏä§ÌÖú Ïó∞ÎèôÏùÑ ÏúÑÌï¥ ÌÅ¥ÎûòÏä§Î™Ö Ïú†ÏßÄÌïòÎêò CSSÎ°ú Ï†úÏñ¥ -->
      <span class="dot"></span>
      <span id="statusText">Connecting...</span>
    </div>
  </header>

  <!-- Main Layout -->
  <main class="app-body">
    <!-- LEFT: Sources + Tracks -->
    <aside class="panel panel-left">
      <!-- YouTube input -->
      <section class="yt-section">
        <!-- Ï†úÍ±∞Îê®: YouTube ÌîåÎ¶¨ Í∞ÄÏ†∏Ïò§Í∏∞ ÏÑπÏÖò ÎùºÎ≤® Ï†úÍ±∞ -->
        <!-- Î≥ÄÍ≤ΩÎê®: placeholderÏóê ÏïàÎÇ¥ Ìè¨Ìï® -->
        <div class="yt-row">
          <input type="text" id="ytUrl" class="input-text" placeholder="YouTube URL Í∏∞ÏûÖ" />
          <input type="number" id="ytMax" class="input-number" value="20" min="1" max="50" title="ÏµúÎåÄ Í≥° Ïàò" />
        </div>
        <!-- Î≥ÄÍ≤ΩÎê®: Îã§Ïö¥Î°úÎìú Î≤ÑÌäº ÎîîÏûêÏù∏ Í∞úÏÑ†(btn-accent -> btn-primary) -->
        <button class="btn btn-primary full-width" id="ytDownloadBtn">Îã§Ïö¥Î°úÎìú</button>
        <div id="ytStatus" class="yt-status hidden"></div>
      </section>

      <!-- Î≥ÄÍ≤ΩÎê®: or Íµ¨Î∂ÑÏÑ†ÏùÑ ÏñáÍ≥† ÎØ∏ÎãàÎ©ÄÌïòÍ≤å -->
      <div class="divider"><span>or</span></div>

      <!-- Local file upload -->
      <!-- Î≥ÄÍ≤ΩÎê®: ÎìúÎûòÍ∑∏ Ïï§ ÎìúÎ°≠ ÏòÅÏó≠ ÌÖçÏä§Ìä∏ ÎØ∏ÎãàÎ©ÄÌôî -->
      <section class="upload-zone" id="uploadZone">
        <div class="upload-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 18V5l12-2v13"></path>
            <circle cx="6" cy="18" r="3"></circle>
            <circle cx="18" cy="16" r="3"></circle>
          </svg>
        </div>
        <p class="upload-title">MP3 / WAV</p>
        <label class="btn btn-secondary" for="fileInput">ÌååÏùº ÏÑ†ÌÉù</label>
        <input type="file" id="fileInput" accept=".mp3,.wav" multiple hidden />
      </section>

      <!-- Track list -->
      <div id="trackList" class="track-list hidden">
        <div class="section-header">
          <h2>Ìä∏Îûô Î™©Î°ù <span id="trackCount" class="badge">0</span></h2>
          <div class="header-actions">
            <button class="btn btn-ghost btn-sm" id="selectAllBtn" title="Ï†ÑÏ≤¥ ÏÑ†ÌÉù/Ìï¥Ï†ú">Ï†ÑÏ≤¥ ÏÑ†ÌÉù</button>
            <button class="btn btn-icon" id="clearBtn" title="Ï†ÑÏ≤¥ ÏÇ≠Ï†ú">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12" />
              </svg>
            </button>
          </div>
        </div>
        <div id="tracks"></div>

        <div class="action-block">
          <!-- Î≥ÄÍ≤ΩÎê®: Ïï°ÏÖò Î≤ÑÌäº ÌÅ¥ÎûòÏä§ -->
          <button class="btn btn-primary btn-lg full-width" id="smartMixBtn" disabled>
            Ïä§ÎßàÌä∏ ÎØπÏä§ ÏÉùÏÑ±
          </button>
        </div>
      </div>
    </aside>

    <!-- RIGHT: Mix Planner + Result -->
    <section class="panel panel-right">

      <!-- Progress State -->
      <div id="progressPanel" class="hidden">
        <div class="loading-spinner">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round" class="spin-anim">
            <circle cx="12" cy="12" r="10"></circle>
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M20 12h-2"></path>
          </svg>
        </div>
        <div class="progress-header">
          <span id="progressLabel">Î∂ÑÏÑù Ï§ë...</span>
          <span id="progressPct">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <p id="progressSub" class="progress-sub"></p>
      </div>

      <!-- Transitions panel (hidden, not shown to user) -->
      <div id="transitionsPanel" class="hidden">
        <div id="transitionsList"></div>
        <button id="generateBtn" class="hidden"></button>
      </div>

      <!-- Result -->
      <div id="resultPanel" class="hidden">
        <div class="result-layout">
          <!-- Left sidebar for versions -->
          <div class="versions-sidebar">
            <div class="flex justify-between items-center mb-20">
              <h3 style="margin:0;">ÎØπÏä§ Î≤ÑÏ†Ñ</h3>
            </div>
            <div id="versionsList" class="versions-list">
              <!-- Version tabs will be injected here -->
            </div>
          </div>

          <!-- Main content for selected version -->
          <div class="version-content flex-grow">
            <!-- Header actions -->
            <div class="version-header flex justify-between items-center mb-20">
              <div class="flex items-center" style="gap: 12px;">
                <h2 id="versionTitle">ÎØπÏä§ ÏôÑÏÑ±!</h2>
                <button class="btn btn-ghost" id="regenerateBtn" style="padding: 4px 10px; font-size: 11px;">+ ÏÉà Î≤ÑÏ†Ñ
                  ÏÉùÏÑ±</button>
              </div>
              <div class="flex items-center" style="gap: 16px;">
                <p id="resultInfo" class="result-info" style="margin:0;"></p>
                <div class="result-actions flex" style="flex-direction: row; gap: 8px; margin:0;">
                  <button class="btn btn-primary" id="downloadZipBtn">üì¶ ZIP Ï†ÄÏû•</button>
                  <div class="dropdown">
                    <button class="btn btn-ghost">Îã®Í±¥ Îã§Ïö¥ ‚ñæ</button>
                    <div class="dropdown-content">
                      <button class="dropdown-item" id="downloadMp3Btn">üéµ MP3 Îã§Ïö¥Î°úÎìú</button>
                      <button class="dropdown-item" id="downloadLrcBtn">üìù LRC Îã§Ïö¥Î°úÎìú</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- In-app audio player attached to top -->
            <div class="result-player mb-20">
              <audio id="mixAudio" controls class="full-width"></audio>
            </div>

            <!-- Timeline visualization -->
            <div class="timeline-container">
              <h3>Ìä∏Îûô ÌÉÄÏûÑÎùºÏù∏</h3>
              <div id="timelineList" class="timeline-list">
                <!-- Track entries injected here -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty state -->
      <!-- Ï†úÍ±∞Îê®: Îπà ÏÉÅÌÉúÏùò ÌÖçÏä§Ìä∏ ÏÑ§Î™Ö Î∞è Ï†úÎ™© -->
      <!-- Î≥ÄÍ≤ΩÎê®: Íµ¨Ï°∞Îßå ÎÇ®Í∏∞Í≥† ÏïÑÏù¥ÏΩòÏúºÎ°ú Ï≤òÎ¶¨ -->
      <div id="emptyState" class="empty-state">
        <div class="empty-icon">
          <!-- Î†àÏΩîÎìú/ÌÑ¥ÌÖåÏù¥Î∏î ÌòïÌÉúÏùò Í∞ÑÍ≤∞Ìïú ÏïÑÏù¥ÏΩò -->
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M20 12h-2"></path>
          </svg>
        </div>
      </div>

    </section>
  </main>

  <!-- Toast container -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="app.js" type="module"></script>
</body>

</html>